repos:
  - repo: https://github.com/astral-sh/ruff-pre-commit
  # Ruff version.
    rev: v0.14.1
    hooks:
      # Run the linter.
      - id: ruff
        args: [ --fix ]
      # Run the formatter.
      - id: ruff-format
  - repo: local
    hooks:
      - id: pyrefly-typecheck
        name: pyrefly check
        entry: bash -c 'uv run pyrefly check src/'
        language: system
        types_or: [python, pyi]
        pass_filenames: false
        require_serial: true
      - id: pytest-coverage
        name: pytest coverage check (80% minimum)
        entry: bash -c 'uv run pytest src/tests -m unit -q --cov=src/py_identity_model --cov-report=term-missing:skip-covered --cov-fail-under=80'
        language: system
        types: [python]
        pass_filenames: false
        require_serial: true
